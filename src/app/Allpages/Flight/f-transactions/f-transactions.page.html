<ion-content>
  <ng-container *ngIf="showbooking">
    <ion-row class="ion-padding-top s-bar">


      <ion-col size-sm="12" size-xs="12" size-md="2" size-lg="2" size-xl="2">


      </ion-col>

      <ion-col size-sm="12" size-xs="12" size-md="8" size-lg="8" size-xl="8">
        <ion-row style=" padding-top: 10px; margin-top: 10px;">
          <!-- style="border-left: 2px solid #445f99; border-bottom: 2px solid #445f99; border-right: 2px solid #445f99; padding-top: 10px;"> -->
          <ion-col size-sm="12" size-xs="12" size-md="3" size-lg="3" size-xl="3">
            <fieldset>
              <input type="date" [(ngModel)]="from" [max]="maxDate">
            </fieldset>

          </ion-col>

          <ion-col size-sm="12" size-xs="12" size-md="3" size-lg="3" size-xl="3">
            <fieldset>
              <input type="date" [(ngModel)]="to" [max]="maxDate">
            </fieldset>
          </ion-col>

          <ion-col size-sm="12" size-xs="12" size-md="3" size-lg="3" size-xl="3">
            <button class="submit-btn" type="submit" (click)="apiHit()">
              <!-- <span class="material-icons">search</span> -->
               Search History
            </button>
          </ion-col>

          <ion-col size-sm="12" size-xs="12" size-md="3" size-lg="3" size-xl="3">
            <ion-badge color="tertiary" class="ionp"  style="cursor: pointer;"
              (click)="exportexcel()">
              <img src="https://img.icons8.com/material-outlined/12/ffffff/download--v1.png" /> Download Excel
            </ion-badge>
          </ion-col>

        </ion-row>
      </ion-col>
    </ion-row>

    <ion-row style="padding: 0px;">
      <ion-col size-xs="12" size-sm="12" size-md="12" size-lg="12" size-xl="12">
        <table id="tab5" class="table" border="1px" >
          <thead class="thead">
            <tr>
              <th class="padding th">
                #
              </th>
              <th class="padding th">
                AliasId
              </th>
              <!-- <th class="padding th">
              Agent Id

            </th> -->
              <th class="padding th">
                BookingAmt
              </th>
              <th class="padding th">
                CurrentBalance
              </th>
              <th class="padding th">
                PreviousBalance
              </th>
              <th class="padding th">
                Product
              </th>

              <!-- <th class="padding th">
              Trans Id
            </th> -->

              <th class="padding th">
                DealAmt
              </th>
              <th class="padding th">
                NetAmt
              </th>
              <th class="padding th">
                GstAmt
              </th>
              <th class="padding th">
                SFAmt
              </th>
              <th class="padding th">
                TdsAmt
              </th>
              <th class="padding th">
                CBAmt
              </th>
              <th class="padding th">
                PromoAmt
              </th>
              <th class="padding th">
                ETime
              </th>
              <th class="padding th">
                Remark
              </th>
              <th class="padding th">
                Narration
              </th>


            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let d of test, index as i" class="hvr">
              <td class="td">{{i+1}}</td>
              <td class="td" (click)="PNR(d)">{{d.AliasId}}</td>
              <!-- <td class="td">{{d.Agentid}}</td> -->
              <td class="td">{{d.BookingAmt}}</td>
              <td class="td">{{d.CurrentBalance}}</td>
              <td class="td">{{d.PreviousBalance}}</td>
              <td class="td">{{d.Product}}</td>
              <!-- <td class="td">{{d.TransId}}</td> -->
              <td class="td">{{d.DealAmt}}</td>
              <td class="td">{{d.NetAmt}}</td>
              <td class="td">{{d.GstAmt}}</td>
              <td class="td">{{d.SFAmt}}</td>
              <td class="td">{{d.TdsAmt}}</td>
              <td class="td">{{d.CBAmt}}</td>
              <td class="td">{{d.PromoAmt}}</td>
              <!-- <td  class="td">{{d.AliasId}}</td> -->
              <td class="td">{{d.ETime }}</td>
              <!-- <td class="td">{{d.ETime | date: 'dd/MM/yyyy'}} / {{d.ETime | date:"hh:mm"}}</td> -->
              <td class="td">{{d.Remark}}</td>
              <td class="td">{{d.Narration}}</td>




              <!-- <td><ion-button   color="danger" (click)="showcanclBut(d)" >Cancel</ion-button></td> -->

            </tr>
          </tbody>
        </table>


      </ion-col>
    </ion-row>
  </ng-container>


  <ion-col size-md="11" size-lg="11" size-xl="11">
    <div style='background: transparent; width: 100%;' *ngIf="showticket">
      <div class='c'></div>
      <br />
      <table
        style='padding: 5px 10px 5px; border: #d8d8d8 1px double; box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 2px 1px -1px rgba(0, 0, 0, 0.12); background: #fff;'
        cellspacing='0' cellpadding='0' width='767' align='center'>
        <tr>
          <td>
            <table cellspacing='0' cellpadding='0' style='width: 97%; margin: auto; margin-top: 10px;'>
              <tr style='text-align: center;'>
                <td width='209' style='text-align: left;'>
                  <div style='font-size: 26px; font-weight: bold; color: #f03900;'>Flight E-Ticket</div>
                  <div style='font-size: 12px; line-height: 10px;'><i>As on dated
                      <b>{{test.SelectFlights.DDate}}</b>
                    </i></div>
                </td>
                <td width='201' style='text-align: right;'>
                  <ion-icon name="close-circle-outline" class="close" (click)="hide()"></ion-icon>
                  <div style='font-size: 18px; font-weight: bold; color: #f03900;'>Kafila Hospitality and
                    Travels Pvt Ltd</div>
                  <!-- <div style='font-size: 12px;'></div> -->
                  <div style='font-size: 12px;'>Customer Email Id :- {{test.PaxInfo.PaxEmail}}</div>
                  <div style='font-size: 12px;'>Customer Mobile No :- {{test.PaxInfo.PaxMobile}}</div>
                </td>
              </tr>
              <tr style='border: 0; padding: 5px;' height='10' cellspacing='0' cellpadding='0' bgcolor='transparent'>
                <td></td>
              </tr>
              <tr class='ClassStrip'>
                <td style='text-align: left; font-size: 14px; padding: 2px; color: #111; background: #efefef;'
                  width='300'>
                  APNR ~ <b>{{test.BookingInfo.APnr}}</b>
                  GPNR ~ <b>{{test.BookingInfo.GPnr}}</b>
                </td>
                <td style='text-align: right; font-size: 14px; padding: 2px; color: #111; background: #efefef;'
                  width='300'>
                  Booking Id ~ <b>{{test.BookingInfo.BookingId}}</b></td>
              </tr>
            </table>
            <table style='border: 0; padding: 5px;' height='12' cellspacing='0' cellpadding='0' bgcolor='#fff'>
              <tr>
                <td></td>
              </tr>
            </table>

            <table style='border: 0; padding: 5px;' height='12' cellspacing='0' cellpadding='0' bgcolor='#fff'>
              <tr>
                <td></td>
              </tr>
            </table>

            <!--flight 1-->
            <table cellspacing='0' cellpadding='0' style='width: 97%; margin: auto; border-bottom: 1px solid #ccc'
              *ngFor=" let d of test.SelectFlights">
              <tr
                style='padding: 3px 5px; font-size: 15px; background: transparent; color: #555; font-weight: bold; border-bottom: 0px solid #CCC;line-height: 24px;'>
                <td colspan='4' style='font-size: 14px;'><span style='display: none'>Onward</span>
                  <div style='float: left; background-position: -242px -441px' class='fltLogo'></div>

                  <span>Flight Summary </span>

                </td>

              </tr>

              <tr class='ClassHead'>
                <td width='73'>Flight</td>
                <td width='73'>Date</td>
                <td width='73'>From / Trml</td>
                <td width='73'>To / Trml</td>
                <td width='73'>Departs</td>
                <td width='73'>Arrives</td>

              </tr>
              <tr class='ClassHeadContent' *ngFor=" let a of d.Itinerary">
                <td width='73'>{{a.FCode}}{{a.FNo}}</td>
                <td width='73'>{{a.DDate}}</td>
                <td width='93'>{{a.SrcName}} / {{a.DTrmnl}}</td>
                <td width='93'>{{a.DesName}} / {{a.ATrmnl}}</td>
                <td width='63'>{{a.DDate}}</td>
                <td width='63'>{{a.ADate}}</td>

              </tr>


            </table>


            <!--pax-->
            <table cellspacing='0' cellpadding='0' style='width: 97%; margin: auto; border-bottom: 1px solid #ccc'
              *ngFor="let a of test.PaxInfo.Passengers">
              <tr class='ClassTitle'>
                <td colspan='5' width='97%'>Traveller's Summary</td>
              </tr>
              <tr class='ClassHead'>
                <td>No</td>
                <td class='txt-lt pad-lt-5'>Passenger Name</td>
                <td>Type</td>
                <td>Gender </td>
                <td>DOB</td>

              </tr>
              <tr class='MailTr'
                style='font-size: 11px; text-align: center; line-height: 19px; font-size: 13px; background: #fff'>
                <td style='padding: 2px 0; border-right: 1px solid  #ff8a8a;'>1</td>
                <td
                  style='font-weight: bold; padding: 2px 0; border-right: 1px solid  #ff8a8a; text-align: left; padding: 2px 0px 2px 5px;'>
                  {{a.FName}} {{a.LName}}</td>
                <td style='padding: 2px 0; border-right: 1px solid  #ff8a8a;'>{{a.PaxType}}</td>
                <td style='padding: 2px 0; border-right: 1px solid  #ff8a8a;'>{{a.Gender}}</td>
                <td style='padding: 2px 0; border-right: 1px solid  #ff8a8a;'>{{a.Dob}}</td>

              </tr>

            </table>
            <table style='border: 0; padding: 5px;' height='12' cellspacing='0' cellpadding='0' bgcolor='#fff'>
              <tr>
                <td></td>
              </tr>
            </table>


            <table cellspacing='0' cellpadding='0' style='width: 97%; margin: auto; border-bottom: 1px solid #ccc'>
              <tr class='ClassTitle'>
                <td colspan='5' width='97%'>FareBreakup
                  Summary</td>
              </tr>
              <tr class='ClassHead'>
                <!-- <td>No</td> -->
                <td width='400' class='txt-lt pad-lt-5'>No</td>
                <td width='400' class='txt-lt pad-lt-5'>Type</td>
                <td width='400' class='txt-lt pad-lt-5'>amount</td>


              </tr>
              <tr style='background: #fff !important; font-weight: normal' class='ClassHeadContent'
                *ngFor=" let d of tax; index as i ">
                <td width='100'>{{i+1}}</td>
                <td width='200' class='txt-lt pad-lt-5'>{{d.CType}}({{d.CCode}})</td>

                <td width='200'>{{d.Amt}}</td>
              </tr>

            </table>


            <table cellspacing='0' cellpadding='0' style='width: 97%; margin: auto; border-bottom: 1px solid #ccc'
              *ngFor=" let d of test.SelectFlights">
              <tr class='ClassTitle'>
                <td colspan='5' width='97%'>Fare Summary</td>
              </tr>
              <tr class='ClassHead'>
                <td>No</td>
                <td width='400' class='txt-lt pad-lt-5'>Type</td>

                <td>Total (Inr)</td>
              </tr>
              <tr style='background: #fff !important; font-weight: normal' class='ClassHeadContent'>
                <td width='100'>1</td>
                <td width='200' class='txt-lt pad-lt-5'>Basic</td>

                <td width='200'>{{d.Fare.BasicTotal}}</td>
              </tr>
              <tr style='background: #fdffe2 !important; font-weight: normal' class='ClassHeadContent'>
                <td width='100'>2</td>
                <td width='200' class='txt-lt pad-lt-5'>YQ</td>

                <td width='200'>{{d.Fare.YqTotal}}</td>
              </tr>
              <tr style='background: #fff !important; font-weight: normal' class='ClassHeadContent'>
                <td width='100'>3</td>
                <td width='200' class='txt-lt pad-lt-5'>Taxes </td>

                <td width='200'>{{d.Fare.TaxesTotal}}</td>
              </tr>

              <tr style='background: #fff !important; font-weight: bold' class='ClassHeadContent'>
                <td width='100'>5</td>
                <td width='200' class='txt-lt pad-lt-5'>Grand Total</td>

                <td width='200'>{{d.Fare.GrandTotal}}</td>
              </tr>
            </table>

            <table style='border: 0; padding: 5px;' height='12' cellspacing='0' cellpadding='0' bgcolor='#fff'>
              <tr>
                <td></td>
              </tr>
            </table>
            <table cellspacing='0' cellpadding='0' style='width: 97%; margin: auto; border-bottom: 1px solid #ccc'
              *ngFor=" let d of test.SelectFlights">
              <tr class='ClassTitle'>
                <td colspan='5' width='97%'>Flight Inclusion</td>
              </tr>
              <tr class='ClassHead'>
                <td width='100'>No</td>
                <td width='200' class='txt-lt pad-lt-5'>Type</td>
                <td width='200'>Onward</td>
                <td width='200'>Return</td>
              </tr>
              <tr class='ClassHeadContent'>
                <td width='100'>1</td>
                <td width='200' class='txt-lt pad-lt-5'>Check-In Baggage</td>
                <td width='200'>{{d.FareRule.CHKNBG}}</td>
                <td width='200'>ASAP Airlines</td>
              </tr>
              <tr class='ClassHeadContent'>
                <td width='100'>2</td>
                <td width='200' class='txt-lt pad-lt-5'>Cabin Baggage</td>
                <td width='200'>{{d.FareRule.CBNBG}}</td>
                <td width='200'>ASAP Airlines</td>
              </tr>
              <tr class='ClassHeadContent'>
                <td width='100'>3</td>
                <td width='200' class='txt-lt pad-lt-5'>Cancelation Fee</td>
                <td width='200'>{{d.FareRule.CBH}} - {{d.FareRule.CBHA}} <br> {{d.FareRule.CWBH}} - {{d.FareRule.CWBHA}}
                </td>
                <td width='200'>ASAP Airlines</td>
              </tr>
              <tr class='ClassHeadContent'>
                <td width='100'>4</td>
                <td width='200' class='txt-lt pad-lt-5'>Date Change Fee</td>
                <td width='200'>{{d.FareRule.RBH}} - {{d.FareRule.RBHA}} <br> {{d.FareRule.RWBH}} - {{d.FareRule.RWBHA}}
                </td>
                <td width='200'>ASAP Airlines</td>
              </tr>
            </table>

            <!--Important Terms-->
            <table class='imp-note' border='0' cellspacing='0' cellpadding='0' width='767' align='center'>
              <tr>
                <u>Important Terms:</u>

              </tr>
              <tr>
                <td><span class='circle-bullet'></span>&nbsp;Check-in begins 2 hours before scheduled departure
                  and closes
                  45
                  minutes prior to the departure time.</td>
              </tr>
              <tr>
                <td><span class='circle-bullet'></span>&nbsp;Passengers, including children and infant, must
                  present with
                  valid
                  identification while checki-in</td>
              </tr>
              <tr>
                <td><span class='circle-bullet'></span>&nbsp;Use your Airline PNR for all communication about
                  Terminal
                  Queries,
                  Baggage, Booking Status.</td>
              </tr>
              <tr>
                <td><span class='circle-bullet'></span>&nbsp;We are not be responsible for any Flight
                  delay/Cancellation
                  from
                  airline's end.</td>
              </tr>
              <tr>
                <td><span class='circle-bullet'></span>&nbsp;Change permitted more than 2 hours prior to
                  departure with
                  payment of
                  change fee and difference in fare if applicable.</td>
              </tr>
              <tr>
                <td><span class='circle-bullet'></span>&nbsp;In case of cancellations less than 6 hours before
                  departure
                  please
                  cancel with the airlines directly. We are not responsible for any losses if the request is
                  received less
                  than 6
                  hours before departure.</td>
              </tr>
            </table>
        </tr>
      </table>
      <table style='border: 0; padding: 5px;' height='10' cellspacing='0' cellpadding='0' bgcolor='#fff'></table>
      <br />
      <br />
    </div>
  </ion-col>
  <ion-col size-md="1" size-lg="1" size-xl="1"> </ion-col>
</ion-content>